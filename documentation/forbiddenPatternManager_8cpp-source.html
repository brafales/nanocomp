<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NanoComp: /home/enzo/treballs/fib/pfc/nanocomp/src/forbiddenPatternManager.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>/home/enzo/treballs/fib/pfc/nanocomp/src/forbiddenPatternManager.cpp</h1><a href="forbiddenPatternManager_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> *                                                                         *</span>
<a name="l00003"></a>00003 <span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span>
<a name="l00004"></a>00004 <span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span>
<a name="l00005"></a>00005 <span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<a name="l00006"></a>00006 <span class="comment"> *   (at your option) any later version.                                   *</span>
<a name="l00007"></a>00007 <span class="comment"> *                                                                         *</span>
<a name="l00008"></a>00008 <span class="comment"> *   This program is distributed in the hope that it will be useful,       *</span>
<a name="l00009"></a>00009 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
<a name="l00010"></a>00010 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *</span>
<a name="l00011"></a>00011 <span class="comment"> *   GNU General Public License for more details.                          *</span>
<a name="l00012"></a>00012 <span class="comment"> *                                                                         *</span>
<a name="l00013"></a>00013 <span class="comment"> *   You should have received a copy of the GNU General Public License     *</span>
<a name="l00014"></a>00014 <span class="comment"> *   along with this program; if not, write to the                         *</span>
<a name="l00015"></a>00015 <span class="comment"> *   Free Software Foundation, Inc.,                                       *</span>
<a name="l00016"></a>00016 <span class="comment"> *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *</span>
<a name="l00017"></a>00017 <span class="comment">                                                                          */</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="comment">// $Revision: 1.19 $</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="preprocessor">#include "<a class="code" href="forbiddenPatternManager_8hpp.html">forbiddenPatternManager.hpp</a>"</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;wx/filename.h&gt;</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 
<a name="l00026"></a>00026 
<a name="l00029"></a><a class="code" href="classForbiddenPatternManager.html#4f130590d0efd7593eb69b9ce4a71c60">00029</a> <a class="code" href="classForbiddenPatternManager.html#4f130590d0efd7593eb69b9ce4a71c60">ForbiddenPatternManager::ForbiddenPatternManager</a>(<a class="code" href="classMainController.html">MainController</a> *controller)
<a name="l00030"></a>00030 {
<a name="l00031"></a>00031     <a class="code" href="classForbiddenPatternManager.html#aaae6279fe47c278b26c0d8bee9adea6">nextId</a> = 1;
<a name="l00032"></a>00032     <a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a> = 0; <span class="comment">//No FP</span>
<a name="l00033"></a>00033     <a class="code" href="classForbiddenPatternManager.html#f4dc1c3c1923ae3b10065372f47cf5d5">modified</a> = <span class="keyword">false</span>;
<a name="l00034"></a>00034     <a class="code" href="classForbiddenPatternManager.html#beae5a7184670759d7fbd6618de0793b">needNewFile</a> = <span class="keyword">false</span>;
<a name="l00035"></a>00035     <a class="code" href="classForbiddenPatternManager.html#3716d3f7dbbb95c73bceb41af74c17de">fileName</a> = wxEmptyString;
<a name="l00036"></a>00036     <a class="code" href="classForbiddenPatternManager.html#4b4a8af8900f5460bba3c3c92b7a9547">diskManager</a> = <span class="keyword">new</span> <a class="code" href="classForbiddenPatternDiskManager.html">ForbiddenPatternDiskManager</a>(<span class="keyword">this</span>);
<a name="l00037"></a>00037     this-&gt;<a class="code" href="classForbiddenPatternManager.html#29a91afddd7ee101b64ccd5e64aa76cf">controller</a> = <a class="code" href="classForbiddenPatternManager.html#29a91afddd7ee101b64ccd5e64aa76cf">controller</a>;
<a name="l00038"></a>00038 }
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 
<a name="l00042"></a><a class="code" href="classForbiddenPatternManager.html#2693007d5ed6c36a595c4acb8876809d">00042</a> <a class="code" href="classForbiddenPatternManager.html#2693007d5ed6c36a595c4acb8876809d">ForbiddenPatternManager::~ForbiddenPatternManager</a>()
<a name="l00043"></a>00043 {
<a name="l00044"></a>00044     <span class="keyword">delete</span> <a class="code" href="classForbiddenPatternManager.html#4b4a8af8900f5460bba3c3c92b7a9547">diskManager</a>;
<a name="l00045"></a>00045 }
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 
<a name="l00049"></a>00049 
<a name="l00052"></a><a class="code" href="classForbiddenPatternManager.html#b605168ac416f8e311924cac89b8429d">00052</a> <span class="keywordtype">void</span> <a class="code" href="classForbiddenPatternManager.html#b605168ac416f8e311924cac89b8429d">ForbiddenPatternManager::setView</a>(<a class="code" href="classForbiddenPatternView.html">ForbiddenPatternView</a> *view)
<a name="l00053"></a>00053 {
<a name="l00054"></a>00054     this-&gt;<a class="code" href="classForbiddenPatternManager.html#bba6ef82371375674b5dcd57122e1d98">view</a> = <a class="code" href="classForbiddenPatternManager.html#bba6ef82371375674b5dcd57122e1d98">view</a>;
<a name="l00055"></a>00055 }
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 
<a name="l00059"></a>00059 
<a name="l00065"></a><a class="code" href="classForbiddenPatternManager.html#ff2a44372892762509d4ac612a3bcf75">00065</a> <span class="keywordtype">void</span> <a class="code" href="classForbiddenPatternManager.html#ff2a44372892762509d4ac612a3bcf75">ForbiddenPatternManager::cellChanged</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l00066"></a>00066 {
<a name="l00067"></a>00067     <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>[<a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a>]-&gt;cellChanged(x,  y);
<a name="l00068"></a>00068     <a class="code" href="classForbiddenPatternManager.html#a00b7247126b405cfe42d317e664e830">updateGrids</a>(<span class="keyword">false</span>);
<a name="l00069"></a>00069     <a class="code" href="classForbiddenPatternManager.html#f4dc1c3c1923ae3b10065372f47cf5d5">modified</a> = <span class="keyword">true</span>;
<a name="l00070"></a>00070     <a class="code" href="classForbiddenPatternManager.html#29a91afddd7ee101b64ccd5e64aa76cf">controller</a>-&gt;<a class="code" href="classMainController.html#a5027fe553483d55ebc98fedc42d1c1e">elementChanged</a>();
<a name="l00071"></a>00071 }
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 
<a name="l00075"></a>00075 
<a name="l00080"></a><a class="code" href="classForbiddenPatternManager.html#a00b7247126b405cfe42d317e664e830">00080</a> <span class="keywordtype">void</span> <a class="code" href="classForbiddenPatternManager.html#a00b7247126b405cfe42d317e664e830">ForbiddenPatternManager::updateGrids</a>(<span class="keywordtype">bool</span> changed)
<a name="l00081"></a>00081 {
<a name="l00082"></a>00082     <a class="code" href="classGrid.html">Grid</a> grid;
<a name="l00083"></a>00083     <span class="keywordflow">if</span> (<a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a> &gt; 0)
<a name="l00084"></a>00084     {
<a name="l00085"></a>00085         grid = <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>[<a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a>]-&gt;getGrid();
<a name="l00086"></a>00086     }
<a name="l00087"></a>00087     <a class="code" href="classForbiddenPatternManager.html#bba6ef82371375674b5dcd57122e1d98">view</a>-&gt;<a class="code" href="classForbiddenPatternView.html#db78e3f26723025b99de39a14ad24541">updateGrids</a>(grid, changed); 
<a name="l00088"></a>00088 }
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 
<a name="l00092"></a>00092 
<a name="l00096"></a><a class="code" href="classForbiddenPatternManager.html#1a1a277fa030c00662cafb369c14b66d">00096</a> <span class="keywordtype">void</span> <a class="code" href="classForbiddenPatternManager.html#1a1a277fa030c00662cafb369c14b66d">ForbiddenPatternManager::newFP</a>(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)
<a name="l00097"></a>00097 {
<a name="l00098"></a>00098     <a class="code" href="classForbiddenPattern.html">ForbiddenPattern</a> *<a class="code" href="classForbiddenPatternManager.html#1a1a277fa030c00662cafb369c14b66d">newFP</a> = <span class="keyword">new</span> <a class="code" href="classForbiddenPattern.html">ForbiddenPattern</a>(width, height);
<a name="l00099"></a>00099     <span class="comment">//Add the pattern to the collection</span>
<a name="l00100"></a>00100     <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>[<a class="code" href="classForbiddenPatternManager.html#aaae6279fe47c278b26c0d8bee9adea6">nextId</a>] = <a class="code" href="classForbiddenPatternManager.html#1a1a277fa030c00662cafb369c14b66d">newFP</a>;
<a name="l00101"></a>00101     <span class="comment">//Assign the new pattern as the selected one</span>
<a name="l00102"></a>00102     <a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a> = <a class="code" href="classForbiddenPatternManager.html#aaae6279fe47c278b26c0d8bee9adea6">nextId</a>;
<a name="l00103"></a>00103     <a class="code" href="classForbiddenPatternManager.html#aaae6279fe47c278b26c0d8bee9adea6">nextId</a>++;
<a name="l00104"></a>00104     <span class="comment">//Update the view because of the new selection</span>
<a name="l00105"></a>00105     <a class="code" href="classForbiddenPatternManager.html#bba6ef82371375674b5dcd57122e1d98">view</a>-&gt;<a class="code" href="classForbiddenPatternView.html#db78e3f26723025b99de39a14ad24541">updateGrids</a>(<a class="code" href="classForbiddenPatternManager.html#1a1a277fa030c00662cafb369c14b66d">newFP</a>-&gt;getGrid(), <span class="keyword">true</span>);
<a name="l00106"></a>00106     <a class="code" href="classForbiddenPatternManager.html#77be7897b11107179626ee0f831381b3">updateList</a>();
<a name="l00107"></a>00107     <a class="code" href="classForbiddenPatternManager.html#bba6ef82371375674b5dcd57122e1d98">view</a>-&gt;<a class="code" href="classForbiddenPatternView.html#9164f2b5b4cef8ec56ac737ed9f81016">selectFP</a>(<a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a>);
<a name="l00108"></a>00108     <a class="code" href="classForbiddenPatternManager.html#e3d3fe2d749dc93b46af76cdf0153213">FPSelected</a>(<a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a>);
<a name="l00109"></a>00109     <span class="keywordflow">if</span> (<a class="code" href="classForbiddenPatternManager.html#3716d3f7dbbb95c73bceb41af74c17de">fileName</a> == wxEmptyString)
<a name="l00110"></a>00110     {
<a name="l00111"></a>00111         <a class="code" href="classForbiddenPatternManager.html#beae5a7184670759d7fbd6618de0793b">needNewFile</a> = <span class="keyword">true</span>;
<a name="l00112"></a>00112     }
<a name="l00113"></a>00113     <a class="code" href="classForbiddenPatternManager.html#f4dc1c3c1923ae3b10065372f47cf5d5">modified</a> = <span class="keyword">true</span>;
<a name="l00114"></a>00114     <span class="comment">//Notify the controller that the patterns have changed</span>
<a name="l00115"></a>00115     <a class="code" href="classForbiddenPatternManager.html#29a91afddd7ee101b64ccd5e64aa76cf">controller</a>-&gt;<a class="code" href="classMainController.html#fd2312bd02f88968b901035d99af3046">FPsChanged</a>();
<a name="l00116"></a>00116     <a class="code" href="classForbiddenPatternManager.html#29a91afddd7ee101b64ccd5e64aa76cf">controller</a>-&gt;<a class="code" href="classMainController.html#a5027fe553483d55ebc98fedc42d1c1e">elementChanged</a>();
<a name="l00117"></a>00117 }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 
<a name="l00121"></a><a class="code" href="classForbiddenPatternManager.html#77be7897b11107179626ee0f831381b3">00121</a> <span class="keywordtype">void</span> <a class="code" href="classForbiddenPatternManager.html#77be7897b11107179626ee0f831381b3">ForbiddenPatternManager::updateList</a>()
<a name="l00122"></a>00122 {
<a name="l00123"></a>00123     wxArrayString stringList;
<a name="l00124"></a>00124     <span class="keywordflow">for</span> (map&lt;unsigned int, ForbiddenPattern*&gt;::iterator i = <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.begin(); i != <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.end(); i++)
<a name="l00125"></a>00125     {
<a name="l00126"></a>00126         stringList.Add(wxString::Format(_(<span class="stringliteral">"Pattern %d"</span>), (*i).first));
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128     view-&gt;updateList(stringList);
<a name="l00129"></a>00129 }
<a name="l00130"></a>00130 
<a name="l00132"></a>00132 
<a name="l00135"></a><a class="code" href="classForbiddenPatternManager.html#e3d3fe2d749dc93b46af76cdf0153213">00135</a> <span class="keywordtype">void</span> <a class="code" href="classForbiddenPatternManager.html#e3d3fe2d749dc93b46af76cdf0153213">ForbiddenPatternManager::FPSelected</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> FPId)
<a name="l00136"></a>00136 {
<a name="l00137"></a>00137     <a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a> = FPId;
<a name="l00138"></a>00138     <a class="code" href="classForbiddenPatternManager.html#a00b7247126b405cfe42d317e664e830">updateGrids</a>(<span class="keyword">true</span>);
<a name="l00139"></a>00139 }
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 
<a name="l00143"></a><a class="code" href="classForbiddenPatternManager.html#be286124b79f3c18af44af0e5c98dff9">00143</a> <span class="keywordtype">void</span> <a class="code" href="classForbiddenPatternManager.html#be286124b79f3c18af44af0e5c98dff9">ForbiddenPatternManager::removeFP</a>()
<a name="l00144"></a>00144 {
<a name="l00145"></a>00145     <span class="comment">//Delete the pattern</span>
<a name="l00146"></a>00146     <span class="keyword">delete</span> <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>[<a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a>];
<a name="l00147"></a>00147     <span class="comment">//Here we choose the new selected pattern</span>
<a name="l00148"></a>00148     map&lt;unsigned int, ForbiddenPattern*&gt;::iterator i = <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.find(<a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a>);
<a name="l00149"></a>00149     <span class="keywordtype">bool</span> first = (i == <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.begin());
<a name="l00150"></a>00150     <span class="comment">//Create two iterators because we have to delete an element</span>
<a name="l00151"></a>00151     <span class="comment">//pointed by this one and then the iterator comes invalid</span>
<a name="l00152"></a>00152     map&lt;unsigned int, ForbiddenPattern*&gt;::iterator j = i;
<a name="l00153"></a>00153     map&lt;unsigned int, ForbiddenPattern*&gt;::iterator k = i;
<a name="l00154"></a>00154     j++;
<a name="l00155"></a>00155     k--;
<a name="l00156"></a>00156     <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.erase(i);
<a name="l00157"></a>00157     <span class="keywordflow">if</span> (j != <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.end())
<a name="l00158"></a>00158     {
<a name="l00159"></a>00159         <a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a> = (*j).first;
<a name="l00160"></a>00160     }
<a name="l00161"></a>00161     <span class="keywordflow">else</span>
<a name="l00162"></a>00162     {
<a name="l00163"></a>00163         <span class="comment">//We deleted the only pattern left</span>
<a name="l00164"></a>00164         <span class="keywordflow">if</span> (first)
<a name="l00165"></a>00165         {
<a name="l00166"></a>00166             currentFP = 0;<span class="comment">//No FPs</span>
<a name="l00167"></a>00167         }
<a name="l00168"></a>00168         <span class="keywordflow">else</span>
<a name="l00169"></a>00169         {
<a name="l00170"></a>00170             currentFP = (*k).first;
<a name="l00171"></a>00171         }
<a name="l00172"></a>00172     } 
<a name="l00173"></a>00173     <span class="comment">//Update view</span>
<a name="l00174"></a>00174     updateList();
<a name="l00175"></a>00175     view-&gt;selectFP(currentFP);
<a name="l00176"></a>00176     FPSelected(currentFP);
<a name="l00177"></a>00177     modified = <span class="keyword">true</span>;
<a name="l00178"></a>00178     <span class="comment">//Notify main controller that patterns have changed</span>
<a name="l00179"></a>00179     controller-&gt;FPsChanged();
<a name="l00180"></a>00180     controller-&gt;elementChanged();
<a name="l00181"></a>00181 }
<a name="l00182"></a>00182 
<a name="l00183"></a>00183 
<a name="l00185"></a>00185 
<a name="l00191"></a><a class="code" href="classForbiddenPatternManager.html#56c224b105430d4d8fab7a190fa0e4dc">00191</a> <span class="keywordtype">bool</span> <a class="code" href="classForbiddenPatternManager.html#56c224b105430d4d8fab7a190fa0e4dc">ForbiddenPatternManager::saveFile</a>()
<a name="l00192"></a>00192 {
<a name="l00193"></a>00193     <span class="keywordflow">if</span> (<a class="code" href="classForbiddenPatternManager.html#f4dc1c3c1923ae3b10065372f47cf5d5">modified</a>)
<a name="l00194"></a>00194     {
<a name="l00195"></a>00195         <span class="keywordflow">if</span> (<a class="code" href="classForbiddenPatternManager.html#beae5a7184670759d7fbd6618de0793b">needNewFile</a>)
<a name="l00196"></a>00196         {
<a name="l00197"></a>00197             wxString name = <a class="code" href="classForbiddenPatternManager.html#f85c4ef4f3ce353f4c1f76cf8866b00c">fileView</a>.<a class="code" href="classFileManagerView.html#df632316c656ea972020e81716d75ce4">saveFileChoose</a>(<a class="code" href="classForbiddenPatternManager.html#bba6ef82371375674b5dcd57122e1d98">view</a>, _(<span class="stringliteral">"Select a forbidden pattern file to save"</span>), _(<span class="stringliteral">"*.rule"</span>));
<a name="l00198"></a>00198     
<a name="l00199"></a>00199             <span class="keywordflow">if</span> (name != wxEmptyString)
<a name="l00200"></a>00200             {
<a name="l00201"></a>00201                 <a class="code" href="classForbiddenPatternManager.html#3716d3f7dbbb95c73bceb41af74c17de">fileName</a> = name;
<a name="l00202"></a>00202             }
<a name="l00203"></a>00203             <span class="keywordflow">else</span>
<a name="l00204"></a>00204             {
<a name="l00205"></a>00205                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00206"></a>00206             }
<a name="l00207"></a>00207         }
<a name="l00208"></a>00208     
<a name="l00209"></a>00209         list&lt;ForbiddenPattern*&gt; FPs;
<a name="l00210"></a>00210     
<a name="l00211"></a>00211         <span class="keywordflow">for</span>(map&lt;unsigned int, ForbiddenPattern*&gt;::iterator i = <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.begin(); i != <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.end(); i++)
<a name="l00212"></a>00212         {
<a name="l00213"></a>00213             FPs.push_back((*i).second);
<a name="l00214"></a>00214         }
<a name="l00215"></a>00215         
<a name="l00216"></a>00216         <span class="comment">//Set the extension for the filename</span>
<a name="l00217"></a>00217         wxFileName extension(<a class="code" href="classForbiddenPatternManager.html#3716d3f7dbbb95c73bceb41af74c17de">fileName</a>);
<a name="l00218"></a>00218         extension.SetExt(_(<span class="stringliteral">"rule"</span>));
<a name="l00219"></a>00219         <a class="code" href="classForbiddenPatternManager.html#3716d3f7dbbb95c73bceb41af74c17de">fileName</a> = extension.GetFullPath();
<a name="l00220"></a>00220         <span class="keywordflow">if</span> (<a class="code" href="classForbiddenPatternManager.html#4b4a8af8900f5460bba3c3c92b7a9547">diskManager</a>-&gt;<a class="code" href="classForbiddenPatternDiskManager.html#fd304a271e73756dbd3e08d672205450">saveFPs</a>(FPs, <a class="code" href="classForbiddenPatternManager.html#3716d3f7dbbb95c73bceb41af74c17de">fileName</a>))
<a name="l00221"></a>00221         {
<a name="l00222"></a>00222             <a class="code" href="classForbiddenPatternManager.html#f4dc1c3c1923ae3b10065372f47cf5d5">modified</a> = <span class="keyword">false</span>;
<a name="l00223"></a>00223             <a class="code" href="classForbiddenPatternManager.html#beae5a7184670759d7fbd6618de0793b">needNewFile</a> = <span class="keyword">false</span>;
<a name="l00224"></a>00224         }
<a name="l00225"></a>00225         <span class="keywordflow">else</span>
<a name="l00226"></a>00226         {
<a name="l00227"></a>00227             view-&gt;errorMsg(_(<span class="stringliteral">"Error saving forbidden pattern file!"</span>));
<a name="l00228"></a>00228             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00229"></a>00229         }
<a name="l00230"></a>00230     }
<a name="l00231"></a>00231     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00232"></a>00232 }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234 
<a name="l00236"></a>00236 
<a name="l00241"></a><a class="code" href="classForbiddenPatternManager.html#7315e8a4b840bcfa3ae9aef3e86c2c2b">00241</a> <span class="keywordtype">bool</span> <a class="code" href="classForbiddenPatternManager.html#7315e8a4b840bcfa3ae9aef3e86c2c2b">ForbiddenPatternManager::saveFileAs</a>()
<a name="l00242"></a>00242 {
<a name="l00243"></a>00243     wxString name = <a class="code" href="classForbiddenPatternManager.html#f85c4ef4f3ce353f4c1f76cf8866b00c">fileView</a>.<a class="code" href="classFileManagerView.html#df632316c656ea972020e81716d75ce4">saveFileChoose</a>(<a class="code" href="classForbiddenPatternManager.html#bba6ef82371375674b5dcd57122e1d98">view</a>, _(<span class="stringliteral">"Select a forbidden pattern file to save"</span>), _(<span class="stringliteral">"*.rule"</span>));
<a name="l00244"></a>00244     
<a name="l00245"></a>00245     <span class="keywordflow">if</span> (name != wxEmptyString)
<a name="l00246"></a>00246     {
<a name="l00247"></a>00247         <a class="code" href="classForbiddenPatternManager.html#3716d3f7dbbb95c73bceb41af74c17de">fileName</a> = name;
<a name="l00248"></a>00248     }
<a name="l00249"></a>00249     <span class="keywordflow">else</span>
<a name="l00250"></a>00250     {
<a name="l00251"></a>00251         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00252"></a>00252     }
<a name="l00253"></a>00253     
<a name="l00254"></a>00254     list&lt;ForbiddenPattern*&gt; FPs;
<a name="l00255"></a>00255   
<a name="l00256"></a>00256     <span class="keywordflow">for</span>(map&lt;unsigned int, ForbiddenPattern*&gt;::iterator i = <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.begin(); i != <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.end(); i++)
<a name="l00257"></a>00257     {
<a name="l00258"></a>00258         FPs.push_back((*i).second);
<a name="l00259"></a>00259     }
<a name="l00260"></a>00260    
<a name="l00261"></a>00261     <span class="comment">//Set the extension for the filename</span>
<a name="l00262"></a>00262     wxFileName extension(fileName);
<a name="l00263"></a>00263     extension.SetExt(_(<span class="stringliteral">"rule"</span>));
<a name="l00264"></a>00264     fileName = extension.GetFullPath();
<a name="l00265"></a>00265     <span class="keywordflow">if</span> (diskManager-&gt;saveFPs(FPs, fileName))
<a name="l00266"></a>00266     {
<a name="l00267"></a>00267         modified = <span class="keyword">false</span>;
<a name="l00268"></a>00268         needNewFile = <span class="keyword">false</span>;
<a name="l00269"></a>00269     }
<a name="l00270"></a>00270     <span class="keywordflow">else</span>
<a name="l00271"></a>00271     {
<a name="l00272"></a>00272         view-&gt;errorMsg(_(<span class="stringliteral">"Error saving forbidden pattern file!"</span>));
<a name="l00273"></a>00273         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00274"></a>00274     }
<a name="l00275"></a>00275     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00276"></a>00276 }
<a name="l00277"></a>00277 
<a name="l00278"></a>00278 
<a name="l00280"></a>00280 
<a name="l00283"></a><a class="code" href="classForbiddenPatternManager.html#c1390c37b0f71496d01af013cec59a58">00283</a> <span class="keywordtype">void</span> <a class="code" href="classForbiddenPatternManager.html#c1390c37b0f71496d01af013cec59a58">ForbiddenPatternManager::openFile</a>()
<a name="l00284"></a>00284 {
<a name="l00285"></a>00285     <span class="keywordtype">bool</span> <a class="code" href="classForbiddenPatternManager.html#08be8beb16961737961cfab8838455d9">deleteFPs</a> = <span class="keyword">false</span>;
<a name="l00286"></a>00286     <span class="comment">//We should ask if the user wants to replace</span>
<a name="l00287"></a>00287     <span class="comment">//the FPs or if he wants to append them to</span>
<a name="l00288"></a>00288     <span class="comment">//existing</span>
<a name="l00289"></a>00289     <span class="keywordflow">if</span> (<a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.size() &gt; 0)
<a name="l00290"></a>00290     {
<a name="l00291"></a>00291         <span class="keywordflow">if</span> (!<a class="code" href="classForbiddenPatternManager.html#bba6ef82371375674b5dcd57122e1d98">view</a>-&gt;<a class="code" href="classForbiddenPatternView.html#858c246db3727831b798a14b1f1972c4">msgYesNo</a>(_(<span class="stringliteral">"Do you want to append the new forbidden patterns into the existing ones? (Selecting no will delete them)"</span>)))
<a name="l00292"></a>00292         {
<a name="l00293"></a>00293             deleteFPs = <span class="keyword">true</span>;
<a name="l00294"></a>00294             <span class="comment">//We have to delete existing FPs</span>
<a name="l00295"></a>00295             <span class="comment">//Check if the user wants to save modified FPs</span>
<a name="l00296"></a>00296             <span class="keywordflow">if</span> (<a class="code" href="classForbiddenPatternManager.html#f4dc1c3c1923ae3b10065372f47cf5d5">modified</a>)
<a name="l00297"></a>00297             {
<a name="l00298"></a>00298                 <span class="keywordflow">if</span> (<a class="code" href="classForbiddenPatternManager.html#bba6ef82371375674b5dcd57122e1d98">view</a>-&gt;<a class="code" href="classForbiddenPatternView.html#858c246db3727831b798a14b1f1972c4">msgYesNo</a>(_(<span class="stringliteral">"Do you want to save modified forbidden patterns?"</span>)))
<a name="l00299"></a>00299                 {
<a name="l00300"></a>00300                     <a class="code" href="classForbiddenPatternManager.html#56c224b105430d4d8fab7a190fa0e4dc">saveFile</a>();
<a name="l00301"></a>00301                 }
<a name="l00302"></a>00302             }
<a name="l00303"></a>00303         }
<a name="l00304"></a>00304         <span class="keywordflow">else</span>
<a name="l00305"></a>00305         {
<a name="l00306"></a>00306             deleteFPs = <span class="keyword">false</span>;
<a name="l00307"></a>00307         }
<a name="l00308"></a>00308         
<a name="l00309"></a>00309         <span class="keywordflow">if</span> (!appendFPs(deleteFPs, <span class="keyword">false</span>))
<a name="l00310"></a>00310         {
<a name="l00311"></a>00311             view-&gt;errorMsg(_(<span class="stringliteral">"Error opening forbidden pattern file"</span>));
<a name="l00312"></a>00312             clean();
<a name="l00313"></a>00313         }
<a name="l00314"></a>00314     }
<a name="l00315"></a>00315     <span class="keywordflow">else</span>
<a name="l00316"></a>00316     {
<a name="l00317"></a>00317         <span class="keywordflow">if</span> (!appendFPs(deleteFPs, <span class="keyword">true</span>))
<a name="l00318"></a>00318         {
<a name="l00319"></a>00319             view-&gt;errorMsg(_(<span class="stringliteral">"Error opening forbidden pattern file"</span>));
<a name="l00320"></a>00320             clean();
<a name="l00321"></a>00321         }
<a name="l00322"></a>00322     }
<a name="l00323"></a>00323     controller-&gt;elementChanged();
<a name="l00324"></a>00324 }
<a name="l00325"></a>00325 
<a name="l00326"></a>00326 
<a name="l00328"></a><a class="code" href="classForbiddenPatternManager.html#08be8beb16961737961cfab8838455d9">00328</a> <span class="keywordtype">void</span> <a class="code" href="classForbiddenPatternManager.html#08be8beb16961737961cfab8838455d9">ForbiddenPatternManager::deleteFPs</a>()
<a name="l00329"></a>00329 {
<a name="l00330"></a>00330     <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.clear();
<a name="l00331"></a>00331     <a class="code" href="classForbiddenPatternManager.html#aaae6279fe47c278b26c0d8bee9adea6">nextId</a> = 1;
<a name="l00332"></a>00332     <a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a> = 0; <span class="comment">//No current FP</span>
<a name="l00333"></a>00333     <a class="code" href="classForbiddenPatternManager.html#29a91afddd7ee101b64ccd5e64aa76cf">controller</a>-&gt;<a class="code" href="classMainController.html#a5027fe553483d55ebc98fedc42d1c1e">elementChanged</a>();
<a name="l00334"></a>00334 }
<a name="l00335"></a>00335 
<a name="l00336"></a>00336 
<a name="l00338"></a>00338 
<a name="l00344"></a><a class="code" href="classForbiddenPatternManager.html#bcec365c4667ae5f1c1a0f9e567e89bb">00344</a> <span class="keywordtype">bool</span> <a class="code" href="classForbiddenPatternManager.html#bcec365c4667ae5f1c1a0f9e567e89bb">ForbiddenPatternManager::openPFile</a>(wxString file)
<a name="l00345"></a>00345 {
<a name="l00346"></a>00346     <span class="keywordtype">bool</span> result;
<a name="l00347"></a>00347     <a class="code" href="classForbiddenPatternManager.html#3716d3f7dbbb95c73bceb41af74c17de">fileName</a> = file;
<a name="l00348"></a>00348     <a class="code" href="classForbiddenPatternManager.html#08be8beb16961737961cfab8838455d9">deleteFPs</a>();
<a name="l00349"></a>00349     result = <a class="code" href="classForbiddenPatternManager.html#4b4a8af8900f5460bba3c3c92b7a9547">diskManager</a>-&gt;<a class="code" href="classForbiddenPatternDiskManager.html#951e95e98608d2ecb7de9099665ee3e3">openFPs</a>(file);
<a name="l00350"></a>00350     <a class="code" href="classForbiddenPatternManager.html#77be7897b11107179626ee0f831381b3">updateList</a>();
<a name="l00351"></a>00351     <a class="code" href="classForbiddenPatternManager.html#bba6ef82371375674b5dcd57122e1d98">view</a>-&gt;<a class="code" href="classForbiddenPatternView.html#9164f2b5b4cef8ec56ac737ed9f81016">selectFP</a>(<a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a>);
<a name="l00352"></a>00352     <a class="code" href="classForbiddenPatternManager.html#e3d3fe2d749dc93b46af76cdf0153213">FPSelected</a>(<a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a>);
<a name="l00353"></a>00353     <a class="code" href="classForbiddenPatternManager.html#29a91afddd7ee101b64ccd5e64aa76cf">controller</a>-&gt;<a class="code" href="classMainController.html#a5027fe553483d55ebc98fedc42d1c1e">elementChanged</a>();
<a name="l00354"></a>00354     <span class="keywordflow">return</span> result;
<a name="l00355"></a>00355 }
<a name="l00356"></a>00356 
<a name="l00357"></a>00357 
<a name="l00359"></a>00359 
<a name="l00369"></a><a class="code" href="classForbiddenPatternManager.html#4b8779365c47ca05a5820a829f077207">00369</a> <span class="keywordtype">bool</span> <a class="code" href="classForbiddenPatternManager.html#4b8779365c47ca05a5820a829f077207">ForbiddenPatternManager::appendFPs</a>(<span class="keywordtype">bool</span> mustDeleteFPs, <span class="keywordtype">bool</span> newFile)
<a name="l00370"></a>00370 {
<a name="l00371"></a>00371     <span class="keywordtype">bool</span> result;
<a name="l00372"></a>00372     wxString name =<a class="code" href="classForbiddenPatternManager.html#f85c4ef4f3ce353f4c1f76cf8866b00c">fileView</a>.<a class="code" href="classFileManagerView.html#c92ff36cedb6a31bf6609e040e7e2879">openFileChoose</a>(<a class="code" href="classForbiddenPatternManager.html#bba6ef82371375674b5dcd57122e1d98">view</a>, _(<span class="stringliteral">"Select a forbidden pattern file to open"</span>), _(<span class="stringliteral">"*.rule"</span>));
<a name="l00373"></a>00373     
<a name="l00374"></a>00374     <span class="keywordflow">if</span> (name != wxEmptyString)
<a name="l00375"></a>00375     {
<a name="l00376"></a>00376         <span class="keywordflow">if</span> (mustDeleteFPs)
<a name="l00377"></a>00377         {
<a name="l00378"></a>00378             <a class="code" href="classForbiddenPatternManager.html#08be8beb16961737961cfab8838455d9">deleteFPs</a>();
<a name="l00379"></a>00379         }
<a name="l00380"></a>00380         <span class="comment">//Set te new filename if necessary</span>
<a name="l00381"></a>00381         <span class="keywordflow">if</span> (newFile)
<a name="l00382"></a>00382         {
<a name="l00383"></a>00383             <a class="code" href="classForbiddenPatternManager.html#3716d3f7dbbb95c73bceb41af74c17de">fileName</a> = name;
<a name="l00384"></a>00384         }
<a name="l00385"></a>00385         
<a name="l00386"></a>00386         result = <a class="code" href="classForbiddenPatternManager.html#4b4a8af8900f5460bba3c3c92b7a9547">diskManager</a>-&gt;<a class="code" href="classForbiddenPatternDiskManager.html#951e95e98608d2ecb7de9099665ee3e3">openFPs</a>(name);
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388     
<a name="l00389"></a>00389     <a class="code" href="classForbiddenPatternManager.html#77be7897b11107179626ee0f831381b3">updateList</a>();
<a name="l00390"></a>00390     <a class="code" href="classForbiddenPatternManager.html#bba6ef82371375674b5dcd57122e1d98">view</a>-&gt;<a class="code" href="classForbiddenPatternView.html#9164f2b5b4cef8ec56ac737ed9f81016">selectFP</a>(<a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a>);
<a name="l00391"></a>00391     <a class="code" href="classForbiddenPatternManager.html#e3d3fe2d749dc93b46af76cdf0153213">FPSelected</a>(<a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a>);
<a name="l00392"></a>00392     <a class="code" href="classForbiddenPatternManager.html#f4dc1c3c1923ae3b10065372f47cf5d5">modified</a> = <span class="keyword">true</span>;
<a name="l00393"></a>00393     
<a name="l00394"></a>00394     <a class="code" href="classForbiddenPatternManager.html#29a91afddd7ee101b64ccd5e64aa76cf">controller</a>-&gt;<a class="code" href="classMainController.html#a5027fe553483d55ebc98fedc42d1c1e">elementChanged</a>();
<a name="l00395"></a>00395     <span class="keywordflow">return</span> result;    
<a name="l00396"></a>00396 }
<a name="l00397"></a>00397 
<a name="l00398"></a>00398 
<a name="l00400"></a>00400 
<a name="l00403"></a><a class="code" href="classForbiddenPatternManager.html#611391da0dd077b9990f1952373fa487">00403</a> <span class="keywordtype">void</span> <a class="code" href="classForbiddenPatternManager.html#1a1a277fa030c00662cafb369c14b66d">ForbiddenPatternManager::newFP</a>(<a class="code" href="classForbiddenPattern.html">ForbiddenPattern</a> *fp)
<a name="l00404"></a>00404 {
<a name="l00405"></a>00405     <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>[<a class="code" href="classForbiddenPatternManager.html#aaae6279fe47c278b26c0d8bee9adea6">nextId</a>] = fp;
<a name="l00406"></a>00406     <a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a> = <a class="code" href="classForbiddenPatternManager.html#aaae6279fe47c278b26c0d8bee9adea6">nextId</a>;
<a name="l00407"></a>00407     <a class="code" href="classForbiddenPatternManager.html#aaae6279fe47c278b26c0d8bee9adea6">nextId</a>++;
<a name="l00408"></a>00408     <a class="code" href="classForbiddenPatternManager.html#f4dc1c3c1923ae3b10065372f47cf5d5">modified</a> = <span class="keyword">true</span>;
<a name="l00409"></a>00409     <a class="code" href="classForbiddenPatternManager.html#29a91afddd7ee101b64ccd5e64aa76cf">controller</a>-&gt;<a class="code" href="classMainController.html#fd2312bd02f88968b901035d99af3046">FPsChanged</a>();
<a name="l00410"></a>00410     <a class="code" href="classForbiddenPatternManager.html#29a91afddd7ee101b64ccd5e64aa76cf">controller</a>-&gt;<a class="code" href="classMainController.html#a5027fe553483d55ebc98fedc42d1c1e">elementChanged</a>();
<a name="l00411"></a>00411 }
<a name="l00412"></a>00412 
<a name="l00413"></a>00413 
<a name="l00415"></a>00415 
<a name="l00418"></a><a class="code" href="classForbiddenPatternManager.html#86067fd8bac00677370bcfb505e09952">00418</a> wxArrayString <a class="code" href="classForbiddenPatternManager.html#86067fd8bac00677370bcfb505e09952">ForbiddenPatternManager::getFPList</a>()
<a name="l00419"></a>00419 {
<a name="l00420"></a>00420     wxArrayString result;
<a name="l00421"></a>00421     
<a name="l00422"></a>00422     <span class="keywordflow">for</span> (map&lt;unsigned int, ForbiddenPattern*&gt;::iterator i = <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.begin(); i != <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.end(); i++)
<a name="l00423"></a>00423     {
<a name="l00424"></a>00424         result.Add(wxString::Format(_(<span class="stringliteral">"Pattern %d"</span>), (*i).first));
<a name="l00425"></a>00425     }
<a name="l00426"></a>00426     
<a name="l00427"></a>00427     <span class="keywordflow">return</span> result;  
<a name="l00428"></a>00428 }
<a name="l00429"></a>00429 
<a name="l00430"></a>00430 
<a name="l00432"></a>00432 
<a name="l00435"></a><a class="code" href="classForbiddenPatternManager.html#a2b0dfa60b940a38ed197e33a67466bb">00435</a> <span class="keywordtype">bool</span> <a class="code" href="classForbiddenPatternManager.html#a2b0dfa60b940a38ed197e33a67466bb">ForbiddenPatternManager::isModified</a>()
<a name="l00436"></a>00436 {
<a name="l00437"></a>00437     <span class="keywordflow">return</span> <a class="code" href="classForbiddenPatternManager.html#f4dc1c3c1923ae3b10065372f47cf5d5">modified</a>;
<a name="l00438"></a>00438 }
<a name="l00439"></a>00439 
<a name="l00440"></a>00440 
<a name="l00442"></a>00442 
<a name="l00445"></a><a class="code" href="classForbiddenPatternManager.html#fcdad351f2e6469048cc0a58ed5d8e91">00445</a> wxString <a class="code" href="classForbiddenPatternManager.html#fcdad351f2e6469048cc0a58ed5d8e91">ForbiddenPatternManager::getFileName</a>()
<a name="l00446"></a>00446 {
<a name="l00447"></a>00447     <span class="keywordflow">return</span> <a class="code" href="classForbiddenPatternManager.html#3716d3f7dbbb95c73bceb41af74c17de">fileName</a>;
<a name="l00448"></a>00448 }
<a name="l00449"></a>00449 
<a name="l00450"></a>00450 
<a name="l00452"></a>00452 
<a name="l00456"></a><a class="code" href="classForbiddenPatternManager.html#798089fad1dbe5571896524c86386b81">00456</a> <span class="keywordtype">bool</span> <a class="code" href="classForbiddenPatternManager.html#798089fad1dbe5571896524c86386b81">ForbiddenPatternManager::saveFilename</a>(wxString file)
<a name="l00457"></a>00457 {
<a name="l00458"></a>00458     list&lt;ForbiddenPattern*&gt; FPs;
<a name="l00459"></a>00459     <span class="keywordflow">for</span>(map&lt;unsigned int, ForbiddenPattern*&gt;::iterator i = <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.begin(); i != <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.end(); i++)
<a name="l00460"></a>00460         {
<a name="l00461"></a>00461             FPs.push_back((*i).second);
<a name="l00462"></a>00462         }
<a name="l00463"></a>00463         
<a name="l00464"></a>00464         <span class="keywordflow">if</span> (diskManager-&gt;saveFPs(FPs, file))
<a name="l00465"></a>00465         {
<a name="l00466"></a>00466             fileName = file;
<a name="l00467"></a>00467             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00468"></a>00468         }
<a name="l00469"></a>00469         <span class="keywordflow">else</span>
<a name="l00470"></a>00470         {
<a name="l00471"></a>00471             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00472"></a>00472         }
<a name="l00473"></a>00473 }
<a name="l00474"></a>00474 
<a name="l00475"></a>00475 
<a name="l00477"></a>00477 
<a name="l00481"></a><a class="code" href="classForbiddenPatternManager.html#51c7d1b23a943966d7aac0fdfbd48480">00481</a> <span class="keywordtype">void</span> <a class="code" href="classForbiddenPatternManager.html#51c7d1b23a943966d7aac0fdfbd48480">ForbiddenPatternManager::clean</a>()
<a name="l00482"></a>00482 {
<a name="l00483"></a>00483     <a class="code" href="classForbiddenPatternManager.html#3716d3f7dbbb95c73bceb41af74c17de">fileName</a> = wxEmptyString;
<a name="l00484"></a>00484     <a class="code" href="classForbiddenPatternManager.html#08be8beb16961737961cfab8838455d9">deleteFPs</a>();
<a name="l00485"></a>00485     <a class="code" href="classForbiddenPatternManager.html#77be7897b11107179626ee0f831381b3">updateList</a>();
<a name="l00486"></a>00486     <a class="code" href="classForbiddenPatternManager.html#bba6ef82371375674b5dcd57122e1d98">view</a>-&gt;<a class="code" href="classForbiddenPatternView.html#9164f2b5b4cef8ec56ac737ed9f81016">selectFP</a>(<a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a>);
<a name="l00487"></a>00487     <a class="code" href="classForbiddenPatternManager.html#e3d3fe2d749dc93b46af76cdf0153213">FPSelected</a>(<a class="code" href="classForbiddenPatternManager.html#45a9ef08414b05adab8c40715eb92f32">currentFP</a>);
<a name="l00488"></a>00488     <a class="code" href="classForbiddenPatternManager.html#29a91afddd7ee101b64ccd5e64aa76cf">controller</a>-&gt;<a class="code" href="classMainController.html#fd2312bd02f88968b901035d99af3046">FPsChanged</a>();
<a name="l00489"></a>00489     <a class="code" href="classForbiddenPatternManager.html#29a91afddd7ee101b64ccd5e64aa76cf">controller</a>-&gt;<a class="code" href="classMainController.html#a5027fe553483d55ebc98fedc42d1c1e">elementChanged</a>();
<a name="l00490"></a>00490     <a class="code" href="classForbiddenPatternManager.html#f4dc1c3c1923ae3b10065372f47cf5d5">modified</a> = <span class="keyword">false</span>;
<a name="l00491"></a>00491 }
<a name="l00492"></a>00492 
<a name="l00493"></a>00493 
<a name="l00495"></a>00495 
<a name="l00498"></a><a class="code" href="classForbiddenPatternManager.html#ffaa07aac9cb932b3164614b3b52cfc7">00498</a> <span class="keywordtype">bool</span> <a class="code" href="classForbiddenPatternManager.html#ffaa07aac9cb932b3164614b3b52cfc7">ForbiddenPatternManager::checkPatterns</a>()
<a name="l00499"></a>00499 {
<a name="l00500"></a>00500     vector&lt;bool&gt; errors;
<a name="l00501"></a>00501     errors.resize(<a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.size());
<a name="l00502"></a>00502     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; errors.size(); i++)
<a name="l00503"></a>00503     {
<a name="l00504"></a>00504         errors[i] = <span class="keyword">false</span>;
<a name="l00505"></a>00505     }
<a name="l00506"></a>00506     
<a name="l00507"></a>00507     <span class="keywordflow">for</span> (map&lt;unsigned int, ForbiddenPattern*&gt;::iterator i = FPList.begin(); i != FPList.end(); i++)
<a name="l00508"></a>00508     {
<a name="l00509"></a>00509         map&lt;unsigned int, ForbiddenPattern*&gt;::iterator j = i;
<a name="l00510"></a>00510         j++;
<a name="l00511"></a>00511         <span class="keywordflow">while</span> (j != FPList.end())
<a name="l00512"></a>00512         {
<a name="l00513"></a>00513             <span class="keywordflow">if</span> ((*i).second-&gt;equals((*j).second))
<a name="l00514"></a>00514             {
<a name="l00515"></a>00515                 cout &lt;&lt; (*i).first &lt;&lt; <span class="stringliteral">" is equal to "</span> &lt;&lt; (*j).first &lt;&lt; endl;
<a name="l00516"></a>00516                 view-&gt;setListMessage((*j).first, wxString::Format(_(<span class="stringliteral">" - Repeated (%d)"</span>), (*i).first));
<a name="l00517"></a>00517                 errors[(*j).first - 1] = <span class="keyword">true</span>;
<a name="l00518"></a>00518             }
<a name="l00519"></a>00519             j++;
<a name="l00520"></a>00520         }
<a name="l00521"></a>00521     }
<a name="l00522"></a>00522     
<a name="l00523"></a>00523     <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;
<a name="l00524"></a>00524     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; errors.size(); i++)
<a name="l00525"></a>00525     {
<a name="l00526"></a>00526         <span class="keywordflow">if</span> (!errors[i])
<a name="l00527"></a>00527         {
<a name="l00528"></a>00528             view-&gt;resetListItem(i + 1);
<a name="l00529"></a>00529         }
<a name="l00530"></a>00530         <span class="keywordflow">else</span>
<a name="l00531"></a>00531         {
<a name="l00532"></a>00532             result = <span class="keyword">false</span>;
<a name="l00533"></a>00533         }
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535     <span class="keywordflow">return</span> result;
<a name="l00536"></a>00536 }
<a name="l00537"></a>00537 
<a name="l00538"></a>00538 
<a name="l00540"></a>00540 
<a name="l00544"></a><a class="code" href="classForbiddenPatternManager.html#b471421da2bb70dc9099119e5223c290">00544</a> <a class="code" href="classForbiddenPattern.html">ForbiddenPattern</a>* <a class="code" href="classForbiddenPatternManager.html#b471421da2bb70dc9099119e5223c290">ForbiddenPatternManager::getFP</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>)
<a name="l00545"></a>00545 {
<a name="l00546"></a>00546     <span class="keywordflow">if</span> (<a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.find(<span class="keywordtype">id</span>) != <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>.end())
<a name="l00547"></a>00547     {
<a name="l00548"></a>00548         <span class="keywordflow">return</span> <a class="code" href="classForbiddenPatternManager.html#fb2d23212c9f20e44ba3f8897b97ff80">FPList</a>[<span class="keywordtype">id</span>];
<a name="l00549"></a>00549     }
<a name="l00550"></a>00550     <span class="keywordflow">else</span>
<a name="l00551"></a>00551     {
<a name="l00552"></a>00552         <span class="keywordflow">return</span> NULL;
<a name="l00553"></a>00553     }
<a name="l00554"></a>00554 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Fri Sep 1 23:55:13 2006 for NanoComp by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
